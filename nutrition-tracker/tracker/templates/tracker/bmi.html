{% extends 'base.html' %}
{% block title %}BMI Calculator{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">‚öñÔ∏è BMI Calculator</h4>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body text-center">
                                    <h3>üìè Height</h3>
                                    {{ form.height }}
                                    <p class="text-muted mt-2">
                                        Enter your height in centimeters (cm)
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body text-center">
                                    <h3>‚öñÔ∏è Weight</h3>
                                    {{ form.weight }}
                                    <p class="text-muted mt-2">
                                        Enter your weight in kilograms (kg)
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg">
                            Calculate BMI
                        </button>
                        <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary btn-lg">
                            Back to Dashboard
                        </a>
                    </div>
                </form>
                
                <!-- BMI Results -->
                {% if bmi %}
                <div class="card mt-4 {% if category == 'Normal' %}border-success{% else %}border-warning{% endif %}">
                    <div class="card-body text-center">
                        <h3>Your BMI Result</h3>
                        
                        <div class="display-1 mb-3">{{ bmi }}</div>
                        
                        <div class="alert {% if category == 'Normal' %}alert-success{% elif category == 'Underweight' %}alert-info{% else %}alert-warning{% endif %}">
                            <h4 class="alert-heading">{{ category }}</h4>
                            <p>{{ interpretation }}</p>
                        </div>
                        
                        <!-- BMI Chart -->
                        <div class="mt-4">
                            <h5>BMI Categories:</h5>
                            <div class="progress" style="height: 30px;">
                                <div class="progress-bar bg-info" style="width: 18.5%">
                                    Underweight<br>&lt; 18.5
                                </div>
                                <div class="progress-bar bg-success" style="width: 6.5%">
                                    Normal<br>18.5-25
                                </div>
                                <div class="progress-bar bg-warning" style="width: 5%">
                                    Overweight<br>25-30
                                </div>
                                <div class="progress-bar bg-danger" style="width: 70%">
                                    Obese<br>&gt; 30
                                </div>
                            </div>
                            
                            <!-- Indicator for current BMI -->
                            <div class="position-relative" style="margin-top: -30px;">
                                <div style="position: absolute; left: {% widthratio bmi 50 100 %}%; transform: translateX(-50%);">
                                    <div class="text-center">
                                        <div style="font-size: 30px;">‚Üì</div>
                                        <small>Your BMI</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}